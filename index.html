<!doctype html>
<html>
<head>
	<title>Crypto Wrecks</title>
	<script src="js/apexcharts.min.js"></script>
<!-- 	<style>
		canvas {
			-moz-user-select: none;
			-webkit-user-select: none;
			-ms-user-select: none;
		}
	</style> -->
</head>

<body>
<!-- 	<div style="width:75%;">
		<canvas id="myChart"></canvas>
	</div> -->
	<div id="chart" style="width:75%;">
		
	</div>

<!-- 	<script>
		var options = {
		  chart: {
		    type: 'bar'
		  },
		  series: [{
		    name: 'sales',
		    data: [30,40,45,50,49,60,70,91,125]
		  }],
		  xaxis: {
		    categories: [2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020]
		  }
		}

		var chart = new ApexCharts(document.querySelector("#chart"), options);

		chart.render();
	</script>	 -->

	<script>
		var options = {
          series: [{
	          name: 'attack_offchain',
	          data: [
              {
                x: new Date('2011-06-19').getTime(),
                y: 1,
                z: 8750,
                title: "Mt.Gox first hack",
                typeEventDesc: "security breach: auditor's credentials stolen by a hacker",
                status: "in progress",
                link_media: "",
                link_archive: ""
              },
              {
                x: new Date('2018-06-19').getTime(),
                y: 4,
                z: 30000,
                title: "Bithumb hacked during moving assets into a cold wallet",
                typeEventDesc: "security breach in the exchange's hot wallet, including multiple cryptocurrencies",
                status: "resolved",
                link_media: "https://cointelegraph.com/news/from-coincheck-to-bithumb-2018-s-largest-security-breaches-so-far",
                link_archive: ""
              }          
            ]
	        },
	        {
	        name: 'scam',
	          data: [
              {
                x: new Date('2014-02-07').getTime(),
                y: 1,
                z: 5000
              },
              {
                x: new Date('2015-09-17').getTime(),
                y: 3,
                z: 4321
              }          
            ]
	        },

			],
         chart: {
          height: 650,
          type: 'bubble',
          zoom: {
            type: 'xy'
          }
        },
        dataLabels: {
          enabled: false
        },
        fill: {
        	opacity: 0.8
        },
        grid: {
          xaxis: {
            lines: {
              show: true
            }
          },
          yaxis: {
            lines: {
              show: true
            }
          },
        },
        // markers: {
        // 	size: 14
        // },
        plotOptions: {
        	bubble: {
        		minBubbleRadius: 10,
        		maxBubbleRadius: 99
        	}
        },
        tooltip: {
        	x: {
        		format: 'yyyy-MM-dd'
        	},
        	custom: function({series, seriesIndex, dataPointIndex, w}) {
		    	const title = w.config.series[seriesIndex].data[dataPointIndex].title
		    	const descr = w.config.series[seriesIndex].data[dataPointIndex].typeEventDesc
		    	const status = w.config.series[seriesIndex].data[dataPointIndex].status
				const link_media = w.config.series[seriesIndex].data[dataPointIndex].link_media
				const link_archive = w.config.series[seriesIndex].data[dataPointIndex].link_archive

		    	const v = w.config.series[seriesIndex].data[dataPointIndex].z//series[seriesIndex][dataPointIndex]
		    	const dat = new Date(w.config.series[seriesIndex].data[dataPointIndex].x).toISOString().split('T')[0]

		    	return '<div class="arrow_box">' + 
			    		'<span>' + 
			    			'<STRONG>' + title + '</STRONG>' +
			    			' - ' + dat +
			    			'<BR/>Value (USD): ' + v + 
			    			'<BR/>Description: ' + descr +
			    			'<BR/>Status: ' + status +
			    			'<BR/>Link from news media: ' + link_media +
			    			'<BR/>Link to archive.org: ' + link_archive
			    		'</span>' +
		    		'</div>'
		    }        	
        },
        xaxis: {
          type: 'datetime',
	      labels: {
		    format: 'yyyy-MM-dd',
		  },
		  min: new Date('2009-01-01').getTime(),
		  max: new Date('2020-12-31').getTime()
        },
        yaxis: {
          // max: 70
			labels: {
				formatter: function (value) {
					var chainName;

					switch(value) {
						case 1: chainName = 'Bitcoin'; break;
						case 2: chainName = 'Ethereum'; break;
						case 3: chainName = 'EOS'; break;
						case 4: chainName = 'multiple'; break;
						default: chainName = 'unknown';
					}

					return chainName;
				}
			}          
        }
        
        };

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();
      		
	</script>
</body>
</html>